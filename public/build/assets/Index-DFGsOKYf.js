import{s as T}from"./index-DOlIh_04.js";import{s as U}from"./index-0XBAtQHG.js";import{s as P}from"./index-D9uVncCN.js";import{s as A,a as E}from"./index-Cu3rGjYN.js";import{s as L}from"./index-Bgu8At9p.js";import{s as R}from"./index-6-ok8yhX.js";import{r as x,T as Y,W as z,X as G,Y as $,o as p,c as K,w as i,a as o,b as a,t as m,u as W,Z as X,i as k,_ as w,d as g,f as u,g as Z,U as q,F as H}from"./app-Dh8szHK3.js";import{_ as J}from"./AppLayout-BOVyRI-U.js";import M from"./Create-i8t7svU7.js";import Q from"./Edit-CKWFyGhW.js";import{p as ee}from"./lodash-CfgPmycM.js";import{l as te}from"./loadToast-eB3M5pLH.js";import"./index-Be1fzYNM.js";import"./index-Ce9f-3M6.js";import"./index-BT92uTGn.js";import"./index-DAxvJZYr.js";import"./index-B0H_Rm_Y.js";import"./index-teBJk6bl.js";import"./index-DNfLPAdh.js";import"./index-B3b-Iq7d.js";import"./index-n2GB4d98.js";import"./index-DBxa-NAO.js";import"./index-8Aus6rlV.js";import"./index-8ZGhiJ3I.js";import"./index-D0rtx4e8.js";import"./index-BzDxdxb4.js";import"./index-CW_FCnTz.js";import"./index-DI3dG3I0.js";import"./index-DOXpOdoP.js";import"./index-C-T7s70H.js";import"./index-CFSVqPX3.js";import"./index-V7LuKUv1.js";import"./index-D8bT7ROp.js";import"./index-DJoUM3gn.js";import"./layout-9dy0EXsG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-kAC_HHNA.js";import"./index-CshNAVnm.js";import"./index-BPRFKjFC.js";import"./index-RqqKeK1i.js";import"./DropdownLink-DyOCHrdg.js";const oe={class:"card"},re={class:"flex justify-end"},ie=["onClick"],se=["onClick"],le={key:2},ae={class:"flex items-center gap-4"},ne={key:0},pe={class:"grid grid-cols-2 sm:grid-cols-3"},Je={__name:"Index",props:{title:String,filters:Object,permissions:Object,roles:Object,perPage:Number},setup(d){const{_:O,debounce:S,pickBy:N}=ee,l=d;te();const c=x(!1),b=x(!1),y=Y({}),r=z({params:{search:l.filters.search,field:l.filters.field,order:l.filters.order,createOpen:!1,editOpen:!1},role:null}),D=()=>{var s;c.value=!1,y.delete(route("role.destroy",(s=r.role)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{y.reset()},onError:()=>null,onFinish:()=>null})},V=s=>{$.get(route("role.index"),{page:s.page+1},{preserveState:!0})};return G(()=>O.cloneDeep(r.params),S(()=>{let s=N(r.params);$.get(route("role.index"),s,{replace:!0,preserveState:!0,preserveScroll:!0})},150)),(s,e)=>{const f=R,B=A,j=L,F=E,n=P,I=U,_=T;return p(),K(J,null,{default:i(()=>{var h;return[o(W(X),null,{default:i(()=>[a("title",null,m(l.title),1)]),_:1}),a("div",oe,[o(M,{show:r.createOpen,onClose:e[0]||(e[0]=t=>r.createOpen=!1),title:l.title,permissions:l.permissions},null,8,["show","title","permissions"]),o(Q,{show:r.editOpen,onClose:e[1]||(e[1]=t=>r.editOpen=!1),role:r.role,title:l.title,permissions:l.permissions},null,8,["show","role","title","permissions"]),k(o(f,{label:"Create",onClick:e[2]||(e[2]=t=>r.createOpen=!0),icon:"pi pi-plus"},null,512),[[w,s.can(["role.create"])]]),o(I,{lazy:"",value:d.roles.data,paginator:"",rows:d.roles.per_page,totalRecords:d.roles.total,first:(d.roles.current_page-1)*d.roles.per_page,onPage:V,tableStyle:"min-width: 50rem"},{header:i(()=>[a("div",re,[o(F,null,{default:i(()=>[o(B,null,{default:i(()=>e[7]||(e[7]=[a("i",{class:"pi pi-search"},null,-1)])),_:1,__:[7]}),o(j,{modelValue:r.params.search,"onUpdate:modelValue":e[3]||(e[3]=t=>r.params.search=t),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:i(()=>e[8]||(e[8]=[g(" No data found. ")])),loading:i(()=>e[9]||(e[9]=[g(" Loading data. Please wait. ")])),default:i(()=>[o(n,{header:"No"},{body:i(t=>[g(m(t.index+1),1)]),_:1}),o(n,{field:"name",header:"Name"}),o(n,{field:"guard_name",header:"Guard"}),o(n,{header:"Permission"},{body:i(t=>[t.data.permissions.length==l.permissions.length?(p(),u("div",{key:0,onClick:v=>(b.value=!0,r.role=t.data),class:"whitespace-nowrap cursor-pointer text-blue-600 dark:text-blue-400 font-bold underline"}," All Permission ",8,ie)):t.data.permissions.length>0?(p(),u("div",{key:1,onClick:v=>(b.value=!0,r.role=t.data),class:"whitespace-nowrap cursor-pointer text-blue-600 dark:text-blue-400 font-bold underline"},m(t.data.permissions.length)+" Permission ",9,se)):(p(),u("div",le,m(t.data.permissions.length)+" Permission ",1))]),_:1}),o(n,{field:"created_at",header:"Created"}),o(n,{field:"updated_at",header:"Updated"}),o(n,{exportable:!1,style:{"min-width":"12rem"}},{body:i(t=>[k(o(f,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:v=>(r.editOpen=!0,r.role=t.data)},null,8,["onClick"]),[[w,s.can(["role.edit"])]]),k(o(f,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:v=>{c.value=!0,r.role=t.data}},null,8,["onClick"]),[[w,s.can(["role.delete"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),o(_,{visible:c.value,"onUpdate:visible":e[5]||(e[5]=t=>c.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[o(f,{label:"No",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=t=>c.value=!1)}),o(f,{label:"Yes",icon:"pi pi-check",onClick:D})]),default:i(()=>[a("div",ae,[e[12]||(e[12]=a("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),r.role?(p(),u("span",ne,[e[10]||(e[10]=g("Are you sure you want to delete ")),a("b",null,m(r.role.name),1),e[11]||(e[11]=g("?"))])):Z("",!0)])]),_:1},8,["visible"]),o(_,{visible:b.value,"onUpdate:visible":e[6]||(e[6]=t=>b.value=t),modal:"",header:"Permission "+((h=r.role)==null?void 0:h.name),style:{width:"50rem"}},{default:i(()=>{var t;return[a("div",pe,[(p(!0),u(H,null,q((t=r.role)==null?void 0:t.permissions,(v,C)=>(p(),u("div",{key:C,class:"flex justify-between w-full px-4 py-2"},m(++C+". "+v.name),1))),128))])]}),_:1},8,["visible","header"])])]}),_:1})}}};export{Je as default};
