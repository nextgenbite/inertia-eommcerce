import{s as V}from"./index-CD8DSZ7Q.js";import{_ as d,z as _,aa as B,o as r,f as l,c as $,w as I,g as D,b as n,t as f,F as h,X as k,n as E}from"./app-D7NVjfTE.js";import"./index-grb7ft4z.js";import"./index-aUd7mdUX.js";import"./index-CxRlJmjs.js";import"./index-BUdQ7hZ5.js";import"./index-CoP1uDx_.js";import"./index-vOkQgoI4.js";import"./index-Cib-wMrB.js";const F=["src","alt"],q=["src","alt"],z={class:"mt-4"},G={class:"text-lg text-blue-700 font-bold"},Q={class:"space-y-4"},A={class:"font-semibold text-gray-800 mb-2"},H={class:"flex gap-3 flex-wrap"},J=["onClick"],L={key:0,class:"w-16 h-16 mb-1"},M=["src"],X={key:1,class:"px-2"},te={__name:"Product_temp",props:{product:Object},setup(O){const o=O,S=d([{breakpoint:"1300px",numVisible:4},{breakpoint:"575px",numVisible:3}]),m=d({}),b=d(0),p=d([]),y=d([]),g=_(()=>{const a={};return o.product.variants.forEach(s=>{s.attribute_values.forEach(e=>{var c,u;const t=e.attribute;a[t.id]||(a[t.id]={id:t.id,name:t.name,display_name:t.display_name,values:[]}),a[t.id].values.find(v=>v.id===e.id)||a[t.id].values.push({id:e.id,value:e.value,image:((u=(c=o.product.attribute_images)==null?void 0:c.find(v=>v.attribute_value_id===e.id))==null?void 0:u.image_path)??null})})}),Object.values(a)}),x=_(()=>Object.keys(m.value).length?o.product.variants.find(a=>{const s=a.attribute_values.map(t=>t.id).sort().join("-"),e=Object.values(m.value).sort().join("-");return s===e}):null),w=_(()=>x.value?x.value.quantity:o.product.variants.reduce((a,s)=>a+s.quantity,0));B(()=>{var a,s;try{if((s=(a=o.product)==null?void 0:a.images)!=null&&s.length){const e=typeof o.product.images=="string"?JSON.parse(o.product.images.replace(/,\s*\]/,"]")):o.product.images;y.value=e}}catch(e){console.error("Failed to parse product images:",e)}j()});const j=()=>{const a=g.value.find(e=>e.name==="color"),s=(a==null?void 0:a.values.filter(e=>e.image).map(e=>({itemImageSrc:e.image,thumbnailImageSrc:e.image,alt:e.value})))??[];p.value=[...y.value.map((e,t)=>({itemImageSrc:e,thumbnailImageSrc:e,alt:`Product Image ${t+1}`})),...s]},C=(a,s)=>{m.value[a]=s;const e=g.value.find(i=>i.id===a),t=e==null?void 0:e.values.find(i=>i.id===s);if(t!=null&&t.image){const i=p.value.findIndex(c=>{var u;return(u=c.itemImageSrc)==null?void 0:u.includes(t.image)});i!==-1&&(b.value=i)}},N=(a,s)=>m.value[a]===s;return(a,s)=>{const e=V;return r(),l(h,null,[p.value.length?(r(),$(e,{key:0,value:p.value,activeIndex:b.value,responsiveOptions:S.value,numVisible:5,circular:!0,showItemNavigators:!0,showItemNavigatorsOnHover:!0,class:"w-full"},{item:I(t=>[n("img",{src:`/${t.item.itemImageSrc}`,alt:t.item.alt,class:"w-full object-contain"},null,8,F)]),thumbnail:I(t=>[n("img",{src:`/${t.item.thumbnailImageSrc}`,alt:t.item.alt,class:"rounded-lg h-20"},null,8,q)]),_:1},8,["value","activeIndex","responsiveOptions"])):D("",!0),n("div",z,[s[0]||(s[0]=n("h4",{class:"font-semibold text-sm text-gray-700"},"Available Quantity:",-1)),n("div",G,f(w.value),1)]),n("div",Q,[(r(!0),l(h,null,k(g.value,t=>(r(),l("div",{key:t.id},[n("h3",A,f(t.display_name),1),n("div",H,[(r(!0),l(h,null,k(t.values,i=>(r(),l("button",{key:i.id,onClick:c=>C(t.id,i.id),class:E(["border p-2 rounded text-center",N(t.id,i.id)?"ring-2 ring-blue-500":"hover:border-gray-500"])},[i.image?(r(),l("div",L,[n("img",{src:"/"+i.image,alt:"",class:"w-full h-full object-contain"},null,8,M)])):(r(),l("div",X,f(i.value),1))],10,J))),128))])]))),128))])],64)}}};export{te as default};
