import{s as R}from"./index-DNzB-5ej.js";import{s as Y}from"./index-DVhjuUFh.js";import{s as G}from"./index-B31FDo9C.js";import{s as K}from"./index-DTX-2uSs.js";import{s as M}from"./index-C7a_0qTu.js";import{s as X}from"./index-5NLCbnhf.js";import{s as H}from"./index-ZgWXmDiV.js";import{s as J}from"./index-BM4ukIn7.js";import{s as Q,a as Z}from"./index-Cc8t6IMr.js";import{s as P}from"./index-ngb8vxJP.js";import{r as v,T as ee,W as te,X as ae,Y as _,o as d,f as g,a as r,w as s,b as u,i as k,_ as b,d as $,F as re,U as ie,c as y,t as C,l as se,g as ne}from"./app-DZdvOm4L.js";import{_ as le,a as oe}from"./Edit-BLjkB58U.js";import{p as de}from"./lodash-CgBlU4j7.js";import{l as pe}from"./loadToast-C-97hXMK.js";const ue={class:"card"},ce={class:"flex justify-center lg:justify-between flex-col lg:flex-row gap-2"},me={key:3},fe={key:4,class:"capitalize truncate"},ge={class:"flex items-center",style:{height:"17px","flex-grow":"1",overflow:"hidden"}},ve={class:"flex items-center gap-4"},ye={key:0},Ne={__name:"Table",props:{title:Array,filters:Object,getData:Object,perPage:Number,modal_width:String,columns:{type:Array,required:!0},dynamicFrom:{type:Array,required:!0},route:{type:String,required:!0}},setup(n){const{_:O,debounce:V,pickBy:I}=de,l=n;pe();const f=v(!1),S=ee({}),i=te({params:{search:l.filters.search,field:l.filters.field,order:l.filters.order,createOpen:!1,editOpen:!1},item:null}),N=()=>{var a;f.value=!1,S.delete(route(`${l.route}.destroy`,(a=i.item)==null?void 0:a.id),{preserveScroll:!0,onSuccess:()=>{S.reset()},onError:()=>null,onFinish:()=>null})},x=v(),B=a=>{_.get(route(`${l.route}.index`),{page:a.page+1},{preserveState:!0})};ae(()=>O.cloneDeep(i.params),V(()=>{let a=I(i.params);_.get(route(`${l.route}.index`),a,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const D=v(),T=()=>{D.value.exportCSV()};v({label:"Small",value:"small"});function c(a,e){return e.split(".").reduce((p,h)=>p?p[h]:"",a)}function A(a,e){const p=c(a,e);return p&&p.length>0?"/"+p:"/no-image.png"}const W=a=>{if(!a)return null;const e=String(a).toLowerCase();if(console.log(e),["unpaid","paid","partial"].includes(e))switch(e){case"unpaid":return"danger";case"paid":return"success";case"partial":return"warning"}if(["cod","pickup","courier"].includes(e))switch(e){case"cod":return"info";case"pickup":return"success";case"courier":return"warning"}if(["pending","shipped","delivered","cancelled"].includes(e))switch(e){case"pending":return"info";case"shipped":return"warning";case"delivered":return"success";case"cancelled":return"danger"}return null};return(a,e)=>{const p=Q,h=P,j=Z,m=J,U=H,w=X,q=M,F=K,z=G,E=Y,L=R;return d(),g("div",ue,[r(le,{show:i.createOpen,onClose:e[0]||(e[0]=t=>i.createOpen=!1),title:l.title[1],dynamicFrom:n.dynamicFrom,route:n.route,modalWidth:l.modal_width||"60rem"},null,8,["show","title","dynamicFrom","route","modalWidth"]),r(oe,{show:i.editOpen,onClose:e[1]||(e[1]=t=>i.editOpen=!1),data:i.item,title:l.title[1],dynamicFrom:n.dynamicFrom,route:n.route,modalWidth:l.modal_width||"60rem"},null,8,["show","data","title","dynamicFrom","route","modalWidth"]),r(E,{selection:x.value,"onUpdate:selection":e[5]||(e[5]=t=>x.value=t),ref_key:"dt",ref:D,size:"small",lazy:"",stripedRows:"",loading:!n.getData.data,value:n.getData.data,paginator:"",rows:n.getData.per_page,totalRecords:n.getData.total,first:(n.getData.current_page-1)*n.getData.per_page,onPage:B,l:""},{header:s(()=>[u("div",ce,[r(j,null,{default:s(()=>[r(p,null,{default:s(()=>e[8]||(e[8]=[u("i",{class:"pi pi-search"},null,-1)])),_:1,__:[8]}),r(h,{modelValue:i.params.search,"onUpdate:modelValue":e[2]||(e[2]=t=>i.params.search=t),placeholder:"Keyword Search",class:"w-full"},null,8,["modelValue"])]),_:1}),r(U,null,{default:s(()=>[k(r(m,{label:"Create",onClick:e[3]||(e[3]=t=>i.createOpen=!0),icon:"pi pi-plus"},null,512),[[b,a.can([a.$page.props.permissions.create])]]),r(m,{icon:"pi pi-external-link",label:"Export",onClick:e[4]||(e[4]=t=>T(t))})]),_:1})])]),empty:s(()=>e[9]||(e[9]=[u("div",{class:"text-center"},"No data found.",-1)])),loading:s(()=>e[10]||(e[10]=[$(" Loading data. Please wait. ")])),default:s(()=>[r(w,{selectionMode:"multiple",headerStyle:"width: 3rem"}),(d(!0),g(re,null,ie(l.columns,t=>(d(),y(w,{field:t.path,header:t.label,sortable:t==null?void 0:t.sort,headerStyle:"min-width:10rem;",key:t.key},{body:s(o=>[t.key==="image"?(d(),y(q,{key:0,src:A(o.data,t.path),alt:t.label,class:"shadow-2 rounded",width:"100",preview:""},null,8,["src","alt"])):t.key==="tag"?(d(),y(F,{key:1,value:c(o.data,t.path),severity:W(c(o.data,t.path))},null,8,["value","severity"])):t.key==="status"?(d(),y(F,{key:2,value:c(o.data,t.path)==1?"Active":"Inactive",severity:c(o.data,t.path)==1?"success":"danger"},null,8,["value","severity"])):t.path.includes(".")?(d(),g("div",me,C(c(o.data,t.path)),1)):(d(),g("div",fe,C(o.data[t.path]),1))]),_:2},1032,["field","header","sortable"]))),128)),r(w,{exportable:!1,style:{"min-width":"12rem"}},{loading:s(()=>[u("div",ge,[r(z,{width:"30%",height:"1rem"})])]),body:s(t=>[se(a.$slots,"button",{item:t.data}),k(r(m,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:o=>(i.editOpen=!0,i.item=t.data)},null,8,["onClick"]),[[b,a.can([a.$page.props.permissions.update])]]),k(r(m,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:o=>{f.value=!0,i.item=t.data}},null,8,["onClick"]),[[b,a.can([a.$page.props.permissions.delete])]])]),_:3})]),_:3},8,["selection","loading","value","rows","totalRecords","first"]),r(L,{visible:f.value,"onUpdate:visible":e[7]||(e[7]=t=>f.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:s(()=>[r(m,{label:"No",icon:"pi pi-times",text:"",onClick:e[6]||(e[6]=t=>f.value=!1)}),r(m,{label:"Yes",icon:"pi pi-check",onClick:N})]),default:s(()=>[u("div",ve,[e[13]||(e[13]=u("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),i.item?(d(),g("span",ye,[e[11]||(e[11]=$("Are you sure you want to delete ")),u("b",null,C(i.item.title),1),e[12]||(e[12]=$("?"))])):ne("",!0)])]),_:1},8,["visible"])])}}};export{Ne as _};
