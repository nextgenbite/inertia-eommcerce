import{s as T}from"./index-DOlIh_04.js";import{s as j}from"./index-0XBAtQHG.js";import{s as E}from"./index-D9uVncCN.js";import{s as F,a as P}from"./index-Cu3rGjYN.js";import{s as R}from"./index-Bgu8At9p.js";import{s as U}from"./index-6-ok8yhX.js";import{r as Y,T as z,W as A,X as K,Y as C,o as _,c as L,w as a,a as t,b as n,t as c,u as f,Z as W,i as v,_ as g,d as m,f as X,g as Z}from"./app-Dh8szHK3.js";import{_ as q}from"./AppLayout-BOVyRI-U.js";import G from"./Create-BTYU9UzM.js";import H from"./Edit-Ctc6ulAk.js";import{p as J}from"./lodash-CfgPmycM.js";import{l as M}from"./loadToast-eB3M5pLH.js";import"./index-Be1fzYNM.js";import"./index-Ce9f-3M6.js";import"./index-BT92uTGn.js";import"./index-DAxvJZYr.js";import"./index-B0H_Rm_Y.js";import"./index-teBJk6bl.js";import"./index-DNfLPAdh.js";import"./index-B3b-Iq7d.js";import"./index-n2GB4d98.js";import"./index-DBxa-NAO.js";import"./index-8Aus6rlV.js";import"./index-8ZGhiJ3I.js";import"./index-D0rtx4e8.js";import"./index-BzDxdxb4.js";import"./index-CW_FCnTz.js";import"./index-DI3dG3I0.js";import"./index-DOXpOdoP.js";import"./index-C-T7s70H.js";import"./index-CFSVqPX3.js";import"./index-V7LuKUv1.js";import"./index-D8bT7ROp.js";import"./index-DJoUM3gn.js";import"./layout-9dy0EXsG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-kAC_HHNA.js";import"./index-CshNAVnm.js";import"./index-BPRFKjFC.js";import"./index-RqqKeK1i.js";import"./DropdownLink-DyOCHrdg.js";const Q={class:"card"},ee={class:"flex justify-end"},te={class:"flex items-center gap-4"},re={key:0},Le={__name:"Index",props:{title:String,filters:Object,users:Object,roles:Object,perPage:Number},setup(p){var y;const{_:$,debounce:k,pickBy:x}=J,l=p;M();const d=Y(!1),b=z({}),r=A({params:{search:l.filters.search,field:l.filters.field,order:l.filters.order,createOpen:!1,editOpen:!1},user:null}),h=()=>{var s;d.value=!1,b.delete(route("user.destroy",(s=r.user)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{b.reset()},onError:()=>null,onFinish:()=>null})},w=(y=l.roles)==null?void 0:y.map(s=>({name:s.name,code:s.name})),O=s=>{C.get(route("user.index"),{page:s.page+1},{preserveState:!0})};return K(()=>$.cloneDeep(r.params),k(()=>{let s=x(r.params);C.get(route("user.index"),s,{replace:!0,preserveState:!0,preserveScroll:!0})},150)),(s,e)=>{const u=U,S=F,N=R,D=P,i=E,V=j,B=T;return _(),L(q,null,{default:a(()=>[t(f(W),null,{default:a(()=>[n("title",null,c(l.title),1)]),_:1}),n("div",Q,[t(G,{show:r.createOpen,onClose:e[0]||(e[0]=o=>r.createOpen=!1),roles:f(w),title:l.title},null,8,["show","roles","title"]),t(H,{show:r.editOpen,onClose:e[1]||(e[1]=o=>r.editOpen=!1),roles:f(w),user:r.user,title:l.title},null,8,["show","roles","user","title"]),v(t(u,{label:"Create",onClick:e[2]||(e[2]=o=>r.createOpen=!0),icon:"pi pi-plus"},null,512),[[g,s.can(["user.create"])]]),t(V,{lazy:"",value:p.users.data,paginator:"",rows:p.users.per_page,totalRecords:p.users.total,first:(p.users.current_page-1)*p.users.per_page,onPage:O,tableStyle:"min-width: 50rem"},{header:a(()=>[n("div",ee,[t(D,null,{default:a(()=>[t(S,null,{default:a(()=>e[6]||(e[6]=[n("i",{class:"pi pi-search"},null,-1)])),_:1,__:[6]}),t(N,{modelValue:r.params.search,"onUpdate:modelValue":e[3]||(e[3]=o=>r.params.search=o),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:a(()=>e[7]||(e[7]=[m(" No data found. ")])),loading:a(()=>e[8]||(e[8]=[m(" Loading data. Please wait. ")])),default:a(()=>[t(i,{header:"No"},{body:a(o=>[m(c(o.index+1),1)]),_:1}),t(i,{field:"name",header:"Name"}),t(i,{field:"email",header:"Email"}),t(i,{header:"Role"},{body:a(o=>[m(c(o.data.roles[0].name),1)]),_:1}),t(i,{field:"created_at",header:"Created"}),t(i,{field:"updated_at",header:"Updated"}),t(i,{exportable:!1,style:{"min-width":"12rem"}},{body:a(o=>[v(t(u,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:I=>(r.editOpen=!0,r.user=o.data)},null,8,["onClick"]),[[g,s.can(["user.update"])]]),v(t(u,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:I=>{d.value=!0,r.user=o.data}},null,8,["onClick"]),[[g,s.can(["user.delete"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),t(B,{visible:d.value,"onUpdate:visible":e[5]||(e[5]=o=>d.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:a(()=>[t(u,{label:"No",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=o=>d.value=!1)}),t(u,{label:"Yes",icon:"pi pi-check",onClick:h})]),default:a(()=>[n("div",te,[e[11]||(e[11]=n("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),r.user?(_(),X("span",re,[e[9]||(e[9]=m("Are you sure you want to delete ")),n("b",null,c(r.user.name),1),e[10]||(e[10]=m("?"))])):Z("",!0)])]),_:1},8,["visible"])])]),_:1})}}};export{Le as default};
