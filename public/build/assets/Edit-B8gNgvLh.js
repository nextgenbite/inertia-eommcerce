import{s as w}from"./index-BI-c12rv.js";import{s as C}from"./index-CMnpQSv0.js";import{s as B}from"./index-CXCCAAsl.js";import{s as U}from"./index-U0kogxX6.js";import{$ as j,T as E,a3 as N,o as a,c as $,w as I,b as l,a as m,u as r,f as d,t as u,g as _,X as F,F as A,e as D}from"./app-CV0NxGem.js";import"./index-Be1fzYNM.js";import"./index-hzZB4rtj.js";import"./index-BH_DOv8Z.js";import"./index-C9MhpJIj.js";import"./index-CHEdkVcj.js";import"./index-Cv0abY7u.js";const O={class:"flex flex-col gap-4"},T={class:"flex flex-col gap-2"},L={key:0,class:"text-red-500"},M={class:"flex flex-col"},P={class:"flex justify-start items-center space-x-2 mt-2"},X={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mt-2"},q=["for"],z={key:0,class:"text-red-500"},G={class:"flex justify-end gap-2"},oe={__name:"Edit",props:{show:Boolean,title:String,role:Object,permissions:Object},emits:["close"],setup(h,{emit:x}){const t=h,n=j({multipleSelect:!1}),f=x,s=E({name:"",permissions:[]}),b=()=>{var i;s.put(route("role.update",(i=t.role)==null?void 0:i.id),{preserveScroll:!0,onSuccess:()=>{f("close"),s.reset()},onError:()=>null,onFinish:()=>null})};N(()=>{var i,e,p;t.show&&(s.errors={},s.name=(i=t.role)==null?void 0:i.name,s.permissions=(e=t.role.permissions)==null?void 0:e.map(c=>c.id)),t.permissions.length==((p=t.role)==null?void 0:p.permissions.length)?n.multipleSelect=!0:n.multipleSelect=!1});const v=i=>{i.target.checked===!1?s.permissions=[]:(s.permissions=[],t.permissions.forEach(e=>{s.permissions.push(e.id)}))},y=()=>{t.permissions.length==s.permissions.length?n.multipleSelect=!0:n.multipleSelect=!1};return(i,e)=>{const p=U,c=B,g=C,k=w;return a(),$(k,{visible:t.show,"onUpdate:visible":e[4]||(e[4]=o=>t.show=o),position:"center",modal:"",header:"Update "+t.title,style:{width:"50rem"},closable:!1},{default:I(()=>[l("form",{onSubmit:D(b,["prevent"])},[l("div",O,[l("div",T,[e[5]||(e[5]=l("label",{for:"name"},"Name",-1)),m(p,{id:"name",modelValue:r(s).name,"onUpdate:modelValue":e[0]||(e[0]=o=>r(s).name=o),class:"flex-auto",autocomplete:"off",placeholder:"Name"},null,8,["modelValue"]),r(s).errors.name?(a(),d("small",L,u(r(s).errors.name),1)):_("",!0)]),l("div",M,[e[7]||(e[7]=l("label",{for:"permissions"},"Permissions",-1)),l("div",P,[m(c,{modelValue:n.multipleSelect,"onUpdate:modelValue":e[1]||(e[1]=o=>n.multipleSelect=o),onChange:v,inputId:"check_all",binary:!0},null,8,["modelValue"]),e[6]||(e[6]=l("label",{for:"check_all",class:"ml-2"}," Check All ",-1))]),l("div",X,[(a(!0),d(A,null,F(t.permissions,(o,S)=>(a(),d("div",{class:"flex items-center justify-start space-x-2",key:S},[m(c,{modelValue:r(s).permissions,"onUpdate:modelValue":e[2]||(e[2]=V=>r(s).permissions=V),onChange:y,inputId:"permission_"+o.id,value:o.id},null,8,["modelValue","inputId","value"]),l("label",{for:"permission_"+o.id,class:"ml-2"},u(o.name),9,q)]))),128))]),r(s).errors.permissions?(a(),d("small",z,u(r(s).errors.permissions),1)):_("",!0)]),l("div",G,[m(g,{type:"button",label:"Cancel",severity:"secondary",onClick:e[3]||(e[3]=o=>f("close"))}),m(g,{type:"submit",label:"Update"})])])],32)]),_:1},8,["visible","header"])}}};export{oe as default};
