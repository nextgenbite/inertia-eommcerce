import{g as M,e as V,c as k,b as z}from"./autoplay-BKEPMKU1.js";function A(d){const{effect:e,swiper:t,on:i,setTranslate:c,setTransition:f,overwriteParams:v,perspective:s,recreateShadows:n,getEffectParams:a}=d;i("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),s&&s()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const o=v?v():{};Object.assign(t.params,o),Object.assign(t.originalParams,o)}),i("setTranslate _virtualUpdated",()=>{t.params.effect===e&&c()}),i("setTransition",(o,w)=>{t.params.effect===e&&f(w)}),i("transitionEnd",()=>{if(t.params.effect===e&&n){if(!a||!a().slideShadows)return;t.slides.forEach(o=>{o.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(w=>w.remove())}),n()}});let r;i("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(r=!0),requestAnimationFrame(()=>{r&&t.slides&&t.slides.length&&(c(),r=!1)}))})}function F(d,e){const t=M(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function N(d){let{swiper:e,duration:t,transformElements:i,allSlides:c}=d;const{activeIndex:f}=e,v=s=>s.parentElement?s.parentElement:e.slides.find(a=>a.shadowRoot&&a.shadowRoot===s.parentNode);if(e.params.virtualTranslate&&t!==0){let s=!1,n;c?n=i:n=i.filter(a=>{const r=a.classList.contains("swiper-slide-transform")?v(a):a;return e.getSlideIndex(r)===f}),n.forEach(a=>{V(a,()=>{if(s||!e||e.destroyed)return;s=!0,e.animating=!1;const r=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(r)})})}}function U(d,e,t){const i=`swiper-slide-shadow${` swiper-slide-shadow-${d}`}`,c=M(e);let f=c.querySelector(`.${i.split(" ").join(".")}`);return f||(f=k("div",i.split(" ")),c.append(f)),f}function X(d){let{swiper:e,extendParams:t,on:i}=d;t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const c=s=>typeof s=="string"?s:`${s}px`;A({effect:"creative",swiper:e,on:i,setTranslate:()=>{const{slides:s,wrapperEl:n,slidesSizesGrid:a}=e,r=e.params.creativeEffect,{progressMultiplier:o}=r,w=e.params.centeredSlides,S=z(e);if(w){const y=a[0]/2-e.params.slidesOffsetBefore||0;n.style.transform=`translateX(calc(50% - ${y}px))`}for(let y=0;y<s.length;y+=1){const p=s[y],x=p.progress,m=Math.min(Math.max(p.progress,-r.limitProgress),r.limitProgress);let g=m;w||(g=Math.min(Math.max(p.originalProgress,-r.limitProgress),r.limitProgress));const T=p.swiperSlideOffset,E=[e.params.cssMode?-T-e.translate:-T,0,0],$=[0,0,0];let P=!1;e.isHorizontal()||(E[1]=E[0],E[0]=0);let l={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};m<0?(l=r.next,P=!0):m>0&&(l=r.prev,P=!0),E.forEach((u,h)=>{E[h]=`calc(${u}px + (${c(l.translate[h])} * ${Math.abs(m*o)}))`}),$.forEach((u,h)=>{let R=l.rotate[h]*Math.abs(m*o);$[h]=R}),p.style.zIndex=-Math.abs(Math.round(x))+s.length;const C=E.join(", "),O=`rotateX(${S($[0])}deg) rotateY(${S($[1])}deg) rotateZ(${S($[2])}deg)`,q=g<0?`scale(${1+(1-l.scale)*g*o})`:`scale(${1-(1-l.scale)*g*o})`,I=g<0?1+(1-l.opacity)*g*o:1-(1-l.opacity)*g*o,j=`translate3d(${C}) ${O} ${q}`;if(P&&l.shadow||!P){let u=p.querySelector(".swiper-slide-shadow");if(!u&&l.shadow&&(u=U("creative",p)),u){const h=r.shadowPerProgress?m*(1/r.limitProgress):m;u.style.opacity=Math.min(Math.max(Math.abs(h),0),1)}}const b=F(r,p);b.style.transform=j,b.style.opacity=I,l.origin&&(b.style.transformOrigin=l.origin)}},setTransition:s=>{const n=e.slides.map(a=>M(a));n.forEach(a=>{a.style.transitionDuration=`${s}ms`,a.querySelectorAll(".swiper-slide-shadow").forEach(r=>{r.style.transitionDuration=`${s}ms`})}),N({swiper:e,duration:s,transformElements:n,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}export{X as E};
