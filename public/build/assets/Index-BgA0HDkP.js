import{s as V}from"./index-DOlIh_04.js";import{s as B}from"./index-0XBAtQHG.js";import{s as I}from"./index-D9uVncCN.js";import{s as T,a as j}from"./index-Cu3rGjYN.js";import{s as F}from"./index-Bgu8At9p.js";import{s as P}from"./index-6-ok8yhX.js";import{r as U,T as E,W as R,X as Y,Y as b,o as w,c as z,w as r,a as t,b as a,t as c,u as A,Z as G,i as f,_ as v,d as u,f as K,g as L}from"./app-Dh8szHK3.js";import{_ as W}from"./AppLayout-BOVyRI-U.js";import X from"./Create-rJO2vPbA.js";import Z from"./Edit-CIo_r0JB.js";import{p as q}from"./lodash-CfgPmycM.js";import{l as H}from"./loadToast-eB3M5pLH.js";import"./index-Be1fzYNM.js";import"./index-Ce9f-3M6.js";import"./index-BT92uTGn.js";import"./index-DAxvJZYr.js";import"./index-B0H_Rm_Y.js";import"./index-teBJk6bl.js";import"./index-DNfLPAdh.js";import"./index-B3b-Iq7d.js";import"./index-n2GB4d98.js";import"./index-DBxa-NAO.js";import"./index-8Aus6rlV.js";import"./index-8ZGhiJ3I.js";import"./index-D0rtx4e8.js";import"./index-BzDxdxb4.js";import"./index-CW_FCnTz.js";import"./index-DI3dG3I0.js";import"./index-DOXpOdoP.js";import"./index-C-T7s70H.js";import"./index-CFSVqPX3.js";import"./index-V7LuKUv1.js";import"./index-D8bT7ROp.js";import"./index-DJoUM3gn.js";import"./layout-9dy0EXsG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-kAC_HHNA.js";import"./index-CshNAVnm.js";import"./index-BPRFKjFC.js";import"./index-RqqKeK1i.js";import"./DropdownLink-DyOCHrdg.js";const J={class:"card"},M={class:"flex justify-end"},Q={class:"flex items-center gap-4"},ee={key:0},Ae={__name:"Index",props:{title:String,filters:Object,permissions:Object,roles:Object,perPage:Number},setup(n){const{_:y,debounce:C,pickBy:_}=q,l=n;H();const m=U(!1),g=E({}),o=R({params:{search:l.filters.search,field:l.filters.field,order:l.filters.order,createOpen:!1,editOpen:!1},permission:null}),$=()=>{var s;m.value=!1,g.delete(route("permission.destroy",(s=o.permission)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{g.reset()},onError:()=>null,onFinish:()=>null})},k=s=>{b.get(route("permission.index"),{page:s.page+1},{preserveState:!0})};return Y(()=>y.cloneDeep(o.params),C(()=>{let s=_(o.params);b.get(route("permission.index"),s,{replace:!0,preserveState:!0,preserveScroll:!0})},150)),(s,e)=>{const d=P,x=T,O=F,h=j,p=I,S=B,N=V;return w(),z(W,null,{default:r(()=>[t(A(G),null,{default:r(()=>[a("title",null,c(l.title),1)]),_:1}),a("div",J,[t(X,{show:o.createOpen,onClose:e[0]||(e[0]=i=>o.createOpen=!1),title:l.title},null,8,["show","title"]),t(Z,{show:o.editOpen,onClose:e[1]||(e[1]=i=>o.editOpen=!1),permission:o.permission,title:l.title},null,8,["show","permission","title"]),f(t(d,{label:"Create",onClick:e[2]||(e[2]=i=>o.createOpen=!0),icon:"pi pi-plus"},null,512),[[v,s.can(["permission.create"])]]),t(S,{lazy:"",value:n.permissions.data,paginator:"",rows:n.permissions.per_page,totalRecords:n.permissions.total,first:(n.permissions.current_page-1)*n.permissions.per_page,onPage:k,tableStyle:"min-width: 50rem"},{header:r(()=>[a("div",M,[t(h,null,{default:r(()=>[t(x,null,{default:r(()=>e[6]||(e[6]=[a("i",{class:"pi pi-search"},null,-1)])),_:1,__:[6]}),t(O,{modelValue:o.params.search,"onUpdate:modelValue":e[3]||(e[3]=i=>o.params.search=i),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:r(()=>e[7]||(e[7]=[u(" No data found. ")])),loading:r(()=>e[8]||(e[8]=[u(" Loading data. Please wait. ")])),default:r(()=>[t(p,{header:"No"},{body:r(i=>[u(c(i.index+1),1)]),_:1}),t(p,{field:"name",header:"Name"}),t(p,{field:"guard_name",header:"Guard"}),t(p,{field:"created_at",header:"Created"}),t(p,{field:"updated_at",header:"Updated"}),t(p,{exportable:!1,style:{"min-width":"12rem"}},{body:r(i=>[f(t(d,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:D=>(o.editOpen=!0,o.permission=i.data)},null,8,["onClick"]),[[v,s.can(["permission.edit"])]]),f(t(d,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:D=>{m.value=!0,o.permission=i.data}},null,8,["onClick"]),[[v,s.can(["permission.delete"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),t(N,{visible:m.value,"onUpdate:visible":e[5]||(e[5]=i=>m.value=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[t(d,{label:"No",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=i=>m.value=!1)}),t(d,{label:"Yes",icon:"pi pi-check",onClick:$})]),default:r(()=>[a("div",Q,[e[11]||(e[11]=a("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),o.permission?(w(),K("span",ee,[e[9]||(e[9]=u("Are you sure you want to delete ")),a("b",null,c(o.permission.name),1),e[10]||(e[10]=u("?"))])):L("",!0)])]),_:1},8,["visible"])])]),_:1})}}};export{Ae as default};
