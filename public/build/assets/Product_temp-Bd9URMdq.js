import{s as V}from"./index-D0bSOOeW.js";import{Y as d,y as _,a9 as B,o as r,f as l,c as $,w as I,g as D,b as n,t as f,F as h,W as k,n as E}from"./app-DREqqXO0.js";import"./index-DuEI3Jqb.js";import"./index-CuuT3ows.js";import"./index-D4JHFbkd.js";import"./index-TWGVXRrT.js";import"./index-CBesyPoi.js";import"./index-CaO7sUgs.js";import"./index-DGvsfW-D.js";import"./index-Bf6gdw6w.js";const F=["src","alt"],q=["src","alt"],G={class:"mt-4"},Q={class:"text-lg text-blue-700 font-bold"},z={class:"space-y-4"},A={class:"font-semibold text-gray-800 mb-2"},H={class:"flex gap-3 flex-wrap"},J=["onClick"],L={key:0,class:"w-16 h-16 mb-1"},M=["src"],W={key:1,class:"px-2"},se={__name:"Product_temp",props:{product:Object},setup(O){const o=O,S=d([{breakpoint:"1300px",numVisible:4},{breakpoint:"575px",numVisible:3}]),m=d({}),b=d(0),p=d([]),y=d([]),g=_(()=>{const s={};return o.product.variants.forEach(a=>{a.attribute_values.forEach(e=>{var c,u;const t=e.attribute;s[t.id]||(s[t.id]={id:t.id,name:t.name,display_name:t.display_name,values:[]}),s[t.id].values.find(v=>v.id===e.id)||s[t.id].values.push({id:e.id,value:e.value,image:((u=(c=o.product.attribute_images)==null?void 0:c.find(v=>v.attribute_value_id===e.id))==null?void 0:u.image_path)??null})})}),Object.values(s)}),x=_(()=>Object.keys(m.value).length?o.product.variants.find(s=>{const a=s.attribute_values.map(t=>t.id).sort().join("-"),e=Object.values(m.value).sort().join("-");return a===e}):null),w=_(()=>x.value?x.value.quantity:o.product.variants.reduce((s,a)=>s+a.quantity,0));B(()=>{var s,a;try{if((a=(s=o.product)==null?void 0:s.images)!=null&&a.length){const e=typeof o.product.images=="string"?JSON.parse(o.product.images.replace(/,\s*\]/,"]")):o.product.images;y.value=e}}catch(e){console.error("Failed to parse product images:",e)}j()});const j=()=>{const s=g.value.find(e=>e.name==="color"),a=(s==null?void 0:s.values.filter(e=>e.image).map(e=>({itemImageSrc:e.image,thumbnailImageSrc:e.image,alt:e.value})))??[];p.value=[...y.value.map((e,t)=>({itemImageSrc:e,thumbnailImageSrc:e,alt:`Product Image ${t+1}`})),...a]},C=(s,a)=>{m.value[s]=a;const e=g.value.find(i=>i.id===s),t=e==null?void 0:e.values.find(i=>i.id===a);if(t!=null&&t.image){const i=p.value.findIndex(c=>{var u;return(u=c.itemImageSrc)==null?void 0:u.includes(t.image)});i!==-1&&(b.value=i)}},N=(s,a)=>m.value[s]===a;return(s,a)=>{const e=V;return r(),l(h,null,[p.value.length?(r(),$(e,{key:0,value:p.value,activeIndex:b.value,responsiveOptions:S.value,numVisible:5,circular:!0,showItemNavigators:!0,showItemNavigatorsOnHover:!0,class:"w-full"},{item:I(t=>[n("img",{src:`/${t.item.itemImageSrc}`,alt:t.item.alt,class:"w-full object-contain"},null,8,F)]),thumbnail:I(t=>[n("img",{src:`/${t.item.thumbnailImageSrc}`,alt:t.item.alt,class:"rounded-lg h-20"},null,8,q)]),_:1},8,["value","activeIndex","responsiveOptions"])):D("",!0),n("div",G,[a[0]||(a[0]=n("h4",{class:"font-semibold text-sm text-gray-700"},"Available Quantity:",-1)),n("div",Q,f(w.value),1)]),n("div",z,[(r(!0),l(h,null,k(g.value,t=>(r(),l("div",{key:t.id},[n("h3",A,f(t.display_name),1),n("div",H,[(r(!0),l(h,null,k(t.values,i=>(r(),l("button",{key:i.id,onClick:c=>C(t.id,i.id),class:E(["border p-2 rounded text-center",N(t.id,i.id)?"ring-2 ring-blue-500":"hover:border-gray-500"])},[i.image?(r(),l("div",L,[n("img",{src:"/"+i.image,alt:"",class:"w-full h-full object-contain"},null,8,M)])):(r(),l("div",W,f(i.value),1))],10,J))),128))])]))),128))])],64)}}};export{se as default};
